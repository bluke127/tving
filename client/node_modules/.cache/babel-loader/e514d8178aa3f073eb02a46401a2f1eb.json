{"ast":null,"code":"var _jsxFileName = \"D:\\\\tving\\\\client\\\\src\\\\components\\\\Carousel.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport styled from 'styled/Carousel.module.css';\nimport Img from 'components/Img';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Carousel(_ref) {\n  _s();\n\n  let {\n    list,\n    width = '500px',\n    height = '300px',\n    setList,\n    setLoading\n  } = _ref;\n  const screen = useRef(null);\n  const film = useRef(null);\n  const scene = useRef([]);\n\n  const addScene = el => {\n    if (el) scene.current.push(el);\n  };\n\n  const prev = () => {\n    film.current.style.transition = 'all 0.5s ease';\n    let indexV;\n\n    if (-1 * 100 / list.length * (index - 1) >= 10) {\n      indexV = index;\n    } else {\n      indexV = index - 1;\n    }\n\n    film.current.style.transform = `translateX(${-1 * 100 / list.length * indexV}%)`;\n    setIndex(indexV);\n  };\n\n  const next = () => {\n    film.current.style.transition = 'all 0.5s ease';\n    let indexV;\n\n    if (-1 * 100 / list.length * (index + 1) <= -95) {\n      indexV = index;\n    } else {\n      indexV = index + 1;\n    }\n\n    film.current.style.transform = `translateX(${-1 * 100 / list.length * indexV}%)`;\n    setIndex(indexV);\n  };\n\n  const [index, setIndex] = useState(0);\n  const [firstFlag, setFirstFlag] = useState(true);\n  useEffect(() => {\n    if (firstFlag && list.length) {\n      let listV = list;\n      const ele = listV.pop();\n      listV.unshift(ele);\n      setList(listV);\n      setFirstFlag(false);\n      film.current.style.marginLeft = `-${index * 100}%`;\n    }\n  }, [list]);\n  useEffect(() => {\n    film.current.style.transform = `translateX(${-1 * 100 / list.length * index}%)`;\n  }, [index]);\n\n  const goIndex = idx => {\n    setIndex(idx);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styled.screen,\n    style: {\n      width,\n      height\n    },\n    ref: screen,\n    children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n      className: styled.film,\n      ref: film,\n      style: {\n        width: 100 * list.length + '%'\n      },\n      children: list.length > 0 ? list.map((e, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n        ref: element => addScene(element),\n        className: styled.scene,\n        style: {\n          width: screen.current.clientWidth\n        },\n        children: /*#__PURE__*/_jsxDEV(Img, {\n          className: styled.img,\n          src: e.backdrop_path,\n          alt: `list_${index}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }, this)\n      }, e.backdrop_path, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 15\n      }, this)) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styled.btn_wrap,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: styled.prev,\n        onClick: prev,\n        children: \"\\uC774\\uC804\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styled.next,\n        onClick: next,\n        children: \"\\uB2E4\\uC74C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: styled.index_wrap,\n      children: list.length > 0 ? list.map((e, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n        onClick: () => goIndex(index),\n        children: index\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 15\n      }, this)) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Carousel, \"0oRvKcnouzbIXpTrD9s7+PTYnGg=\");\n\n_c = Carousel;\n\nvar _c;\n\n$RefreshReg$(_c, \"Carousel\");","map":{"version":3,"names":["React","useEffect","useState","useRef","styled","Img","Carousel","list","width","height","setList","setLoading","screen","film","scene","addScene","el","current","push","prev","style","transition","indexV","length","index","transform","setIndex","next","firstFlag","setFirstFlag","listV","ele","pop","unshift","marginLeft","goIndex","idx","map","e","element","clientWidth","img","backdrop_path","btn_wrap","index_wrap"],"sources":["D:/tving/client/src/components/Carousel.tsx"],"sourcesContent":["import React, { useEffect, useState, useMemo, forwardRef, useRef } from 'react';\r\nimport styled from 'styled/Carousel.module.css';\r\nimport {\r\n  RecoilRoot,\r\n  atom,\r\n  selector,\r\n  useRecoilState,\r\n  useRecoilValue,\r\n} from 'recoil';\r\nimport Img from 'components/Img';\r\nimport { unknownObj } from 'types';\r\nexport default function Carousel({\r\n  list,\r\n  width = '500px',\r\n  height = '300px',\r\n  setList,\r\n  setLoading,\r\n}: {\r\n  list: any;\r\n  width?: any;\r\n  height?: any;\r\n  setList?: any;\r\n  setLoading?: any;\r\n}) {\r\n  const screen = useRef(null);\r\n  const film = useRef<HTMLUListElement>(null);\r\n  const scene = useRef([]);\r\n  const addScene = (el: any) => {\r\n    if (el) (scene.current as any[]).push(el);\r\n  };\r\n  const prev = () => {\r\n    (film.current as HTMLElement).style.transition = 'all 0.5s ease';\r\n    let indexV;\r\n\r\n    if (((-1 * 100) / list.length) * (index - 1) >= 10) {\r\n      indexV = index;\r\n    } else {\r\n      indexV = index - 1;\r\n    }\r\n\r\n    (film.current as HTMLElement).style.transform = `translateX(${\r\n      ((-1 * 100) / list.length) * indexV\r\n    }%)`;\r\n    setIndex(indexV);\r\n  };\r\n  const next = () => {\r\n    (film.current as HTMLElement).style.transition = 'all 0.5s ease';\r\n    let indexV;\r\n    if (((-1 * 100) / list.length) * (index + 1) <= -95) {\r\n      indexV = index;\r\n    } else {\r\n      indexV = index + 1;\r\n    }\r\n\r\n    (film.current as HTMLElement).style.transform = `translateX(${\r\n      ((-1 * 100) / list.length) * indexV\r\n    }%)`;\r\n    setIndex(indexV);\r\n  };\r\n  const [index, setIndex] = useState(0);\r\n  const [firstFlag, setFirstFlag] = useState(true);\r\n  useEffect(() => {\r\n    if (firstFlag && list.length) {\r\n      let listV = list;\r\n      const ele = listV.pop();\r\n      listV.unshift(ele);\r\n      setList(listV);\r\n      setFirstFlag(false);\r\n\r\n      (film.current as HTMLElement).style.marginLeft = `-${index * 100}%`;\r\n    }\r\n  }, [list]);\r\n  useEffect(() => {\r\n    (film.current as HTMLElement).style.transform = `translateX(${\r\n      ((-1 * 100) / list.length) * index\r\n    }%)`;\r\n  }, [index]);\r\n  const goIndex = (idx: number) => {\r\n    setIndex(idx);\r\n  };\r\n  return (\r\n    <div className={styled.screen} style={{ width, height }} ref={screen}>\r\n      <ul\r\n        className={styled.film}\r\n        ref={film}\r\n        style={{ width: 100 * list.length + '%' }}\r\n      >\r\n        {list.length > 0\r\n          ? list.map((e: any, index: any) => (\r\n              <li\r\n                ref={element => addScene(element)}\r\n                key={e.backdrop_path}\r\n                className={styled.scene}\r\n                style={{ width: (screen.current! as HTMLElement).clientWidth }}\r\n              >\r\n                <Img\r\n                  className={styled.img}\r\n                  src={e.backdrop_path}\r\n                  alt={`list_${index}`}\r\n                />\r\n              </li>\r\n            ))\r\n          : null}\r\n      </ul>\r\n      <div className={styled.btn_wrap}>\r\n        <button className={styled.prev} onClick={prev}>\r\n          이전\r\n        </button>\r\n        <button className={styled.next} onClick={next}>\r\n          다음\r\n        </button>\r\n      </div>\r\n      <ul className={styled.index_wrap}>\r\n        {list.length > 0\r\n          ? list.map((e: unknownObj, index: number) => (\r\n              <li onClick={() => goIndex(index)} key={index}>\r\n                {index}\r\n              </li>\r\n            ))\r\n          : null}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}